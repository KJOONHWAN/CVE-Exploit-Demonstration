# ğŸ¥ Log4Shell Vulnerability

## ğŸ” What is CVE ?
ğŸ’¬
![image](https://user-images.githubusercontent.com/118449010/206201960-90658f31-3830-43e9-9488-7a41e0aaaba8.png)
> CVE is short for `Common Vulnerabilities and Exposures.` It means publicly known information-security vulnerabilities in publicly released software packages. The informaion is then assigend a CVE ID by a CVE Numbering Authority, CNA. CVEs help IT organizations to more systematically identify security flaws and compensate for vulnerabilities. And it consists of a structure in the order of prefix, year, and numbering.
> #### <div align=center> CVE(Prefix) - 1996(Year) - 0224(Numbering) </div>
> 



## ğŸ” What is Log4Shell(Log4j) ?
ğŸ’¬
>**The Log4j vulnerability CVE-2021-44228, aka â€œLog4Shell.â€** When Log4Shell outputs the log, the log is not only written with message data, but also automatically accesses the directory service using JNDI. By doing so, It may provide a function of converting to a name or downloading a Java object. The attacker exploits this function to connect the victim server to the attacker server to download malicious Java objects. As a result, the malicious code can be used to steal server privileges.
>

## :recycle: Log4Shell Attack Life-Cycle
![ë¡œê·¸í¬ì‰˜ë¼ì´í”„ì‚¬ì´í´](https://user-images.githubusercontent.com/118449010/206230106-572b03e3-ea51-430f-abe2-c50e3705920f.png)
```
ê³µê²©ìëŠ” Log4j ì·¨ì•½ì ì— ë…¸ì¶œë˜ì–´ ìˆëŠ” ì„œë²„ë¥¼ ëŒ€ìƒìœ¼ë¡œ User-Agentì— JNDI Injectionì„ ìœ ë°œí•˜ëŠ” JNDI ì¿¼ë¦¬ë¥¼ ì‚½ì…í•©ë‹ˆë‹¤.
Attacker sends a JNDI Query into the User-Agent that causes injection to exposed server.
```
```
JNDI ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ì´ Log4jì— ì˜í•´ ë¡œê¹…ë˜ëŠ” ê³¼ì •ì—ì„œ LDAP ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ê³  ê³µê²©ìê°€ ì§€ì •í•œ LDAP ì„œë²„ë¡œ ì¿¼ë¦¬ë¥¼ í•©ë‹ˆë‹¤.
JNDI string is logged by Log4j. Log4j parses the string and reaches out to the Attacker's LDAP Server.
```
```
ê³µê²©ìëŠ” ì¿¼ë¦¬ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ ì•…ì„± JAVA í´ë˜ìŠ¤(Exploit.class)ê°€ ìœ„ì¹˜í•œ ì£¼ì†Œ(attacker/Exploit.class)ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
LDAP Server responds hostile address(attacker/Exploit.class) that include malicious java class(Exploit.class).
```
```
ì·¨ì•½í•œ Log4Shell ì„œë²„ëŠ” attacker.com/ì— ìœ„ì¹˜í•œ Exploit.classë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ê²Œ ë˜ê³  ì´ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ ë‹¤ì–‘í•œ ê³µê²©ì´ ê°€ëŠ¥í•˜ê²Œ ë©ë‹ˆë‹¤.
Vulnerable application loads java class and executes malicious code + LDAP server returns with malicious java code.
```








![image](https://user-images.githubusercontent.com/118449010/206232567-12ebf408-bf6c-4a24-a6a3-55a4f2b12b87.png)

## JNDI
![image](https://user-images.githubusercontent.com/118449010/206211470-ababeb61-c94b-403a-aeea-d10044c716af.png)

## LDAP
![image](https://user-images.githubusercontent.com/118449010/206211657-252fad04-2114-49ee-a575-cbfb24fc2440.png)
